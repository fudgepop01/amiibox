!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("maboiijs",[],e):"object"==typeof exports?exports.maboiijs=e():t.maboiijs=e()}(global,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),o=r(2),u=n(r(3)),c=i(r(4));e.plainDataUtils=c;var f=8,s=436,y=540;function l(t,e){for(var r,n,i=[],a=[],o=[],u=[],c=new d(t),f=0;f<16;f++)i[f]=c.readUInt8(e+f);for(f=0;f<14;f++)a[f]=c.readInt8(e+f+16);r=c.readUInt8(e+16+14),n=c.readUInt8(e+16+14+1);for(f=0;f<16;f++)o[f]=c.readUInt8(e+f+16+14+1+1);for(f=0;f<32;f++)u[f]=c.readUInt8(e+f+16+14+1+1+16);return{hmacKey:i,typeString:a,rfu:r,magicBytesSize:n,magicBytes:o,xorPad:u}}e.loadMasterKeys=function(t){var e=l(t,0),r=l(t,80);return e.magicBytesSize>16||r.magicBytesSize>16?null:new a.MasterKeys(e,r)};var d=function(){function t(t){this.uint8=new Uint8Array(t),this.int8=new Int8Array(t)}return t.prototype.readUInt8=function(t){return this.uint8[t]},t.prototype.readInt8=function(t){return this.int8[t]},t}();function p(t,e,r,n,i){for(var a=0;a<i;a++)if(t[e+a]!==r[n+a])return t[e+a]-r[n+a];return 0}function v(t,e,r,n,i){for(var a=Array.isArray(t)?function(t,e,r){t[e]=r}:function(t,e,r){t.setByte(e,r)},o=Array.isArray(r)?function(t,e){return t[e]}:function(t,e){return t.getByte(e)},u=0;u<i;u++)a(t,e+u,o(r,n+u))}function h(t,e,r){var n=[];!function(t,e){v(e,0,t,41,2),function(t,e,r,n){for(var i=0;i<n;i++)t[e+i]=r}(e,2,0,14),v(e,16,t,468,8),v(e,24,t,468,8),v(e,32,t,488,32)}(e,n),function(t,e,r){var n=[];(function(t,e,r){var n=function(t,e,r,n,i,a){for(var o=0;o<a;o++)if(t[e+o]=r[n+o],r[n+o]==i)return e+o+1;return null}(r,0,t.typeString,0,0,14),i=16-t.magicBytesSize;v(r,n,e,0,i),v(r,n+=i,t.magicBytes,0,t.magicBytesSize),n+=t.magicBytesSize,v(r,n,e,16,16),n+=16;for(var a=0;a<32;a++)r[n+a]=e[a+32]^t.xorPad[a];n+=32})(t,e,n),function(t,e,r){var n=48,i=0,a=[],o={iteration:0};for(;n>0;){if(n<32){g(m(t,o.iteration,e),a,0,o),v(r,i,a,0,n);break}g(m(t,o.iteration,e),r,i,o),i+=32,n-=32}}(t.hmacKey,n,r)}(t,n,r)}function m(t,e,r){var n=u.default.createHmac("sha256",new Uint8Array(t));return n.update(new Uint8Array([e>>8&15,e>>0&15].concat(r))),n}function g(t,e,r,n){n.iteration++;var i=t.digest("latin1");v(e,r,Array.from(i).map(function(t){return""+t.charCodeAt(0)}),0,i.length)}function b(t,e,r){var n=u.default.createCipheriv("aes-128-ctr",new Uint8Array(t.aesKey),new Uint8Array(t.aesIV));v(r,44,Array.from(n.update(new Uint8Array(e).subarray(44,436))),0,392),v(r,0,e,0,8),v(r,40,e,40,4),v(r,468,e,468,52)}function w(t,e,r,n,i,a){var o=u.default.createHmac("sha256",new Uint8Array(t)),c=Array.from(o.update(new Uint8Array(e).subarray(r,r+n)).digest());v(i,a,c,0,c.length)}e.unpack=function(t,e){var r=new Array(y).fill(0),n=new Array(y).fill(0),i=new o.DerivedKeys,a=new o.DerivedKeys;return function(t,e){v(e,0,t,8,8),v(e,8,t,128,32),v(e,40,t,16,36),v(e,76,t,160,360),v(e,436,t,52,32),v(e,468,t,0,8),v(e,476,t,84,44)}(e,n),h(t.data,n,i),h(t.tag,n,a),b(i,n,r),w(a.hmacKey,r,468,52,r,s),w(i.hmacKey,r,41,479,r,f),v(r,520,e,520,20),{unpacked:r,result:0==p(r,f,n,f,32)&&0==p(r,s,n,s,32)}},e.pack=function(t,e){var r=new Array(y).fill(0),n=new Array(y).fill(0),i=new o.DerivedKeys,a=new o.DerivedKeys;h(t.tag,e,a),h(t.data,e,i),w(a.hmacKey,e,468,52,n,s);var u,c,l=[].concat(e.slice(41,436),n.slice(s,s+32),e.slice(468,520));return w(i.hmacKey,l,0,l.length,n,f),b(i,e,n),v(c=r,8,u=n,0,8),v(c,128,u,8,32),v(c,16,u,40,36),v(c,160,u,76,360),v(c,52,u,436,32),v(c,0,u,468,8),v(c,84,u,476,44),v(r,520,e,520,20),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return function(t,e){this.data=t,this.tag=e}}();e.MasterKeys=n;var i=function(){return function(t,e,r,n,i,a){this.hmacKey=t,this.typeString=e,this.rfu=r,this.magicBytesSize=n,this.magicBytes=i,this.xorPad=a}}();e.MasterKey=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.aesKey=[],this.aesIV=[],this.hmacKey=[]}return t.prototype.getByte=function(t){return t<16?this.aesKey[t]:t<32?this.aesIV[t-16]:this.hmacKey[t-32]},t.prototype.setByte=function(t,e){return t<16?void(this.aesKey[t]=e):t<32?void(this.aesIV[t-16]=e):void(this.hmacKey[t-32]=e)},t}();e.DerivedKeys=n},function(t,e){t.exports=require("crypto")},function(t,e,r){"use strict";function n(t){for(var e=0,r=t.length,n=[];e<r;){var i=t[e++];if(0===i)break;if(55296==(63488&i)){if(55296==(64512&i))throw new RangeError("Invalid octet 0x"+i.toString(16)+" at offset "+(e-1));if(e===r)throw new RangeError("Expected additional octet");var a=t[e++];if(56320!=(64512&a))throw new RangeError("Invalid octet 0x"+a.toString(16)+" at offset "+(e-1));n.push(((1023&i)<<10)+(1023&a)+65536)}else n.push(i)}return String.fromCharCode.apply(String,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.getAmiiboId=function(t){return t.slice(476,484).map(function(t){return t.toString(16).padStart(2,"0")}).join("")},e.getCharacterId=function(t){return t.slice(476,478).map(function(t){return t.toString(16).padStart(2,"0")}).join("")},e.getGameSeriesId=function(t){return t.slice(476,478).map(function(t){return t.toString(16).padStart(2,"0")}).join("").substr(0,3)},e.getNickName=function(t){for(var e=t.slice(56,76),r=0;r<e.length;r+=2){var i=e[r];e[r]=e[r+1],e[r+1]=i}return n(new Uint16Array(new Uint8Array(e).buffer))},e.getMiiName=function(t){var e=t.slice(102,122);return n(new Uint16Array(new Uint8Array(e).buffer))}}])});